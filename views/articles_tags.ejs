<% articles.forEach(post => { %>
  <div class="blog-entry d-flex blog-entry-search-item align-items-center">
    <a href="/post/<%= post._id %>" class="img-link me-4">
      <img src="/images/img_5_sq.jpg" alt="<%= post.title %>" class="img-fluid">
    </a>
    
    <div>
      <span class="date text-muted">
        <a href="/articles?date=<%= new Date(post.createdAt).toLocaleDateString('es-ES') %>" class="text-primary">
          <%= new Date(post.createdAt).toLocaleDateString('es-ES') %>
        </a> 
        &bullet; 
        <a href="#" class="text-primary"><%= post.category ? post.category.name : 'Sin categor√≠a' %></a>
      </span>
      <h2><a href="/post/<%= post._id %>" class="text-dark fw-bold"><%= post.title %></a></h2>
      <p class="text-muted"><%= post.body.length > 200 ? post.body.substring(0, 200) + '...' : post.body %></p>
<!-- üîπ Enlace para buscar por usuario -->
      <p class="text-muted">
        <strong>Autor:</strong> 
        <% if (post.author) { %>
          <a href="/users/<%= post.author.username %>" class="text-primary"><%= post.author.username %></a>
        <% } else { %>
          Desconocido
        <% } %>
      </p>
      <p><a href="/post/<%= post._id %>" class="btn btn-sm btn-outline-primary">Leer m√°s</a></p>
    </div>
  </div>
<% }) %>

<!-- Paginaci√≥n -->
<% if (totalPages > 1) { %>
  <div class="row text-center pt-5 border-top">
    <div class="col-md-12">
      <nav aria-label="Page navigation">
        <div class="d-flex justify-content-center">
          <% if (currentPage > 1) { %>
            <a href="/articles/tags/<%= currentRoute %>?page=<%= currentPage - 1 %>" class="btn btn-outline-primary me-2">Anterior</a>
          <% } %>

          <ul class="pagination mb-0">
            <% for (let i = 1; i <= totalPages; i++) { %>
              <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                <a class="page-link" href="/articles/tags/<%= currentRoute %>?page=<%= i %>"><%= i %></a>
              </li>
            <% } %>
          </ul>

          <% if (currentPage < totalPages) { %>
            <a href="/articles/tags/<%= currentRoute %>?page=<%= currentPage + 1 %>" class="btn btn-outline-primary ms-2">Siguiente</a>
          <% } %>
        </div>
      </nav>
    </div>
  </div>
<% } %>
