<form action="/newsletter/subscribe" method="POST">
    <div class="form-group mb-3">
      <% if (user) { %>
        <input type="text" class="form-control" name="author" value="<%= user.username %>" readonly>
        <input type="hidden" name="email" value="<%= user.email %>">
      <% } else { %>
        <input type="email" class="form-control" name="email" placeholder="Tu correo electrónico" required>
      <% } %>
    </div>

    <div class="form-group mb-3">
      <label for="categories">Categorías:</label>
      <select class="form-control" id="categories" name="categoryIds" multiple>
        <% categories.forEach(cat => { %>
          <option value="<%= cat._id %>"><%= cat.name %></option>
        <% }) %>
      </select>
    </div>

    <div class="form-group mb-3">
      <label for="tags">Tags:</label>
      <select class="form-control" id="tags" name="tagIds" multiple>
        <% tags.forEach(tag => { %>
          <option value="<%= tag._id %>"><%= tag.name %></option>
        <% }) %>
      </select>
    </div>

    <button type="submit" class="btn btn-primary btn-block">Suscribirse</button>
  </form>