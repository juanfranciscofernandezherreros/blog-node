<div class="container">
  <h1>Mi Perfil</h1>

  <table class="table">
    <tr>
      <th>Usuario:</th>
      <td><%= user.username %></td>
    </tr>
    <tr>
      <th>Email:</th>
      <td><%= user.email %></td>
    </tr>
    <tr>
      <th>Roles:</th>
      <td>
        <% if (user.roles && user.roles.length) { %>
          <%= user.roles.map(role => role.name).join(', ') %>
        <% } else { %>
          Sin roles
        <% } %>
      </td>
    </tr>
    <tr>
      <th>Fecha de Creaci√≥n:</th>
      <td><%= new Date(user.createdAt).toLocaleDateString() %></td>
    </tr>
  </table>

  <!-- Enlace de cerrar sesi√≥n -->
  <a href="/auth/logout" class="btn btn-danger" style="margin-top: 20px;">Cerrar Sesi√≥n</a>

  <hr>

  <!-- Posts que el usuario ha dado like -->
  <h2 class="mt-4">Art√≠culos que te gustaron ‚ù§Ô∏è</h2>

  <% if (likedPosts.length > 0) { %>
    <div class="row">
      <% likedPosts.forEach(post => { %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title"><a href="/post/<%= post._id %>"><%= post.title %></a></h5>
              <p class="card-text">
                Categor√≠a: <%= post.category ? post.category.name : 'Sin categor√≠a' %><br>
                Autor: <%= post.author ? post.author.username : 'An√≥nimo' %>
              </p>
              <a href="/post/<%= post._id %>" class="btn btn-primary btn-sm">Ver art√≠culo</a>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <p>No has dado like a ning√∫n art√≠culo todav√≠a.</p>
  <% } %>

  <hr>

  <!-- Posts que el usuario ha guardado como favorito -->
  <h2 class="mt-4">Tus Favoritos ‚≠ê</h2>

  <% if (favoritedPosts.length > 0) { %>
    <div class="row">
      <% favoritedPosts.forEach(post => { %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title"><a href="/post/<%= post._id %>"><%= post.title %></a></h5>
              <p class="card-text">
                Categor√≠a: <%= post.category ? post.category.name : 'Sin categor√≠a' %><br>
                Autor: <%= post.author ? post.author.username : 'An√≥nimo' %>
              </p>
              <a href="/post/<%= post._id %>" class="btn btn-primary btn-sm">Ver art√≠culo</a>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  <% } else { %>
    <p>No has guardado ning√∫n art√≠culo como favorito.</p>
  <% } %>

  

</div>

<hr>

<!-- Comentarios que el usuario ha dejado -->
<h2 class="mt-4">Tus Comentarios üìù</h2>

<% if (userComments.length > 0) { %>
  <ul class="list-group">
    <% userComments.forEach(comment => { %>
      <li class="list-group-item">
        <strong>En el post:</strong> 
        <% if (comment.postId) { %>
          <a href="/post/<%= comment.postId._id %>"><%= comment.postId.title %></a>
        <% } else { %>
          <em>Post eliminado</em>
        <% } %>
        <br>

        <strong>Fecha:</strong> <%= new Date(comment.createdAt).toLocaleDateString('es-ES') %>
        <p class="mb-1"><%= comment.body %></p>
      </li>
    <% }); %>
  </ul>
<% } else { %>
  <p>No has dejado ning√∫n comentario todav√≠a.</p>
<% } %>



